{"version":3,"sources":["webpack:///../gatsby-theme-ghost-casper/src/templates/author.js","webpack:///../gatsby-theme-ghost-casper/src/components/PostList.js"],"names":["AuthorTemplate","pageContext","data","location","author","site","siteMetadata","title","siteUrl","posts","navItems","edges","totalCount","postsByAuthor","filter","post","node","frontmatter","id","name","bodyAttributes","class","className","style","backgroundImage","coverImage","profileImage","src","alt","bio","website","target","rel","href","twitter","getSocialUrl","facebook","rss","postsPerPage","pageQuery","SCROLL_BUFFER","PostList","props","handleScroll","ticking","requestAnimationFrame","update","document","documentElement","offsetHeight","window","scrollY","innerHeight","setState","postsToShow","state","maxPages","removeEventListener","length","componentDidMount","addEventListener","this","componentWillUnmount","render","slice","map","index","key","React","Component"],"mappings":"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","file":"component---gatsby-theme-ghost-casper-src-templates-author-js-99ed9e25d5a531bb4824.js","sourcesContent":["import React from 'react';\r\nimport { graphql } from 'gatsby';\r\nimport Helmet from 'react-helmet';\r\n\r\nimport Layout from '../components/Layout';\r\nimport PostList from '../components/PostList';\r\nimport Navigation from '../components/Navigation';\r\nimport Icons from '../components/Icons';\r\nimport { getSocialUrl } from '../utils/url';\r\n\r\nconst AuthorTemplate = ({ pageContext, data, location }) => {\r\n  const { author } = pageContext;\r\n  const { title, siteUrl } = data.site.siteMetadata;\r\n  const { posts, navItems } = data;\r\n  const { edges, totalCount } = posts;\r\n\r\n  const postsByAuthor = edges.filter(\r\n    post => post.node.frontmatter.author.id === author.id\r\n  );\r\n\r\n  return (\r\n    <Layout location={location}>\r\n      <Helmet\r\n        title={`Posts By ${author.name} - ${title}`}\r\n        bodyAttributes={{\r\n          class: 'author-template',\r\n        }}\r\n      />\r\n      <header className='site-header outer' style={{\r\n        backgroundImage: `url(${author.coverImage})`\r\n      }}>\r\n        {/* // style='background-image: url({{feature_image}}){{else}}no-cover{{/if}}'> */}\r\n        <div className='inner'>\r\n          <Navigation location={location} navItems={navItems} />\r\n          <div className='site-header-content'>\r\n            {author.profileImage && (\r\n              <img\r\n                className='author-profile-image'\r\n                src={author.profileImage}\r\n                alt={author.name}\r\n              />\r\n            )}\r\n            <h1 className='site-title'>{author.name}</h1>\r\n            {author.bio && <h2 className='author-bio'>{author.bio}</h2>}\r\n            <div className='author-meta'>\r\n              {author.location && (\r\n                <div className='author-location'>\r\n                  {author.location} <span className='bull'>&bull;</span>\r\n                </div>\r\n              )}\r\n              <div className='author-stats'>\r\n                {totalCount === 0\r\n                  ? 'No posts'\r\n                  : `${totalCount} post${totalCount > 1 ? 's' : ''}`}\r\n                <span className='bull'>&bull;</span>\r\n              </div>\r\n              {author.website && (\r\n                <a\r\n                  className='social-link social-link-wb'\r\n                  target='_blank'\r\n                  rel='noreferrer noopener'\r\n                  href={author.website}\r\n                >\r\n                  <Icons.website />\r\n                </a>\r\n              )}\r\n              {author.twitter && (\r\n                <a\r\n                  className='social-link social-link-tw'\r\n                  target='_blank'\r\n                  rel='noreferrer noopener'\r\n                  href={getSocialUrl('twitter', author.twitter)}\r\n                >\r\n                  <Icons.twitter />\r\n                </a>\r\n              )}\r\n              {author.facebook && (\r\n                <a\r\n                  className='social-link social-link-fb'\r\n                  target='_blank'\r\n                  rel='noreferrer noopener'\r\n                  href={getSocialUrl('facebook', author.facebook)}\r\n                >\r\n                  <Icons.facebook />\r\n                </a>\r\n              )}\r\n              <a\r\n                className='social-link social-link-rss'\r\n                target='_blank'\r\n                rel='noreferrer noopener'\r\n                href={`https://feedly.com/i/subscription/feed/${siteUrl}/rss.xml`}\r\n              >\r\n                <Icons.rss />\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n      <PostList posts={postsByAuthor} postsPerPage={10} />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AuthorTemplate;\r\n\r\nexport const pageQuery = graphql`\r\n  {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n        siteUrl\r\n      }\r\n    }\r\n    navItems: allNavigationYaml {\r\n      edges {\r\n        node {\r\n          label\r\n          url\r\n        }\r\n      }\r\n    }\r\n    posts: allMdx(\r\n      sort: { order: DESC, fields: [frontmatter___date] }\r\n      filter: { frontmatter: { draft: { ne: true } } }\r\n    ) {\r\n      totalCount\r\n      edges {\r\n        node {\r\n          ...PostCardFragment\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport PostCard from './PostCard';\r\n\r\nconst SCROLL_BUFFER = 100;\r\n\r\nexport default class PostList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      postsToShow: props.postsPerPage,\r\n    };\r\n\r\n    this.maxPages = props.posts.length;\r\n    this.ticking = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  handleScroll = () => {\r\n    if (!this.ticking) {\r\n      // console.log('Inside scroll handler')\r\n      this.ticking = true;\r\n      requestAnimationFrame(() => this.update());\r\n    }\r\n  };\r\n\r\n  update = () => {\r\n    const distaneToBottom =\r\n      document.documentElement.offsetHeight -\r\n      (window.scrollY + window.innerHeight);\r\n    if (distaneToBottom < SCROLL_BUFFER) {\r\n      // console.log('BU', this.state);\r\n      this.setState(\r\n        {\r\n          postsToShow: this.state.postsToShow + this.props.postsPerPage,\r\n        },\r\n        () => {\r\n          if (this.state.postsToShow >= this.maxPages)\r\n            window.removeEventListener('scroll', this.handleScroll);\r\n        }\r\n      );\r\n    }\r\n    this.ticking = false;\r\n  };\r\n\r\n  render() {\r\n    const { posts } = this.props;\r\n\r\n    return (\r\n      <main id='site-main' className='site-main outer'>\r\n        <div className='inner'>\r\n          <div className='post-feed'>\r\n            {posts.slice(0, this.state.postsToShow).map((post, index) => (\r\n              <PostCard key={index} post={post.node} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}